<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - AMIDELI HUB</title>
    <link rel="stylesheet" href="admin_style.css">
</head>

<body>
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <div class="login-logo">‚òò AMIDELI HUB</div>
            <h2 style="text-align: center; margin-bottom: 2rem;">Admin Panel</h2>

            <div class="error-message" id="loginError">
                –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å
            </div>

            <form id="loginForm">
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="passwordInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
            </form>
        </div>
    </div>

    <div class="dashboard" id="dashboard">
        <div class="header">
            <div class="header-title">‚òò AMIDELI HUB - Admin Panel</div>
            <div class="header-info">
                <button class="btn btn-primary btn-small" onclick="openNewBookingModal()">+ –ù–æ–≤–æ–µ
                    –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                <div class="auto-refresh-status">
                    <span id="refreshIcon">üîÑ</span>
                    <span>–ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 30 —Å–µ–∫</span>
                </div>
                <div class="admin-name">üë§ Admin</div>
                <button class="logout-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
        </div>

        <div class="refresh-indicator" id="refreshIndicator">
            ‚úì –û–±–Ω–æ–≤–ª–µ–Ω–æ
        </div>

        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">‚è≥</div>
                    <div class="stat-value" id="statPending">0</div>
                    <div class="stat-label">–û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="statConfirmed">0</div>
                    <div class="stat-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="statRevenue">0‚Ç∏</div>
                    <div class="stat-label">–î–æ—Ö–æ–¥ –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-value" id="statTotal">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        ‚è≥ –û–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
                        <span class="badge" id="pendingCount">0</span>
                    </h2>
                    <button class="btn btn-info btn-small" onclick="loadBookings()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div id="pendingBookings">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                    </h2>
                    <div class="filters">
                        <select class="filter-select" id="filterRoom" onchange="filterBookings()">
                            <option value="">–í—Å–µ –∫–æ–º–Ω–∞—Ç—ã</option>
                            <option value="conference">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª</option>
                            <option value="studio">–ö–æ–Ω—Ç–µ–Ω—Ç-—Å—Ç—É–¥–∏—è</option>
                            <option value="meeting">–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è</option>
                        </select>
                        <select class="filter-select" id="filterDate" onchange="filterBookings()">
                            <option value="">–í—Å–µ –¥–∞—Ç—ã</option>
                            <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                            <option value="tomorrow">–ó–∞–≤—Ç—Ä–∞</option>
                            <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                        </select>
                    </div>
                </div>
                <div id="confirmedBookings">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">‚ùå –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                </div>
                <div id="cancelledBookings">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            
            <!-- Booking Modal -->
            <div id="bookingModal" class="modal">
                <div class="modal-content">
                    <span class="close-modal" onclick="closeModal()">&times;</span>
                    <h2 id="modalTitle">–ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
                
                    <div class="room-selector">
                        <button class="room-btn active" onclick="selectRoom('conference')">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª</button>
                        <button class="room-btn" onclick="selectRoom('studio')">–ö–æ–Ω—Ç–µ–Ω—Ç-—Å—Ç—É–¥–∏—è</button>
                        <button class="room-btn" onclick="selectRoom('meeting-a')">–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è A</button>
                        <button class="room-btn" onclick="selectRoom('meeting-b')">–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è B</button>
                        <button class="room-btn" onclick="selectRoom('meeting-c')">–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è C</button>
                        <button class="room-btn" onclick="selectRoom('meeting-d')">–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è D</button>
                        <button class="room-btn" onclick="selectRoom('workspace-1')">–ú–µ—Å—Ç–æ 1</button>
                        <button class="room-btn" onclick="selectRoom('workspace-2')">–ú–µ—Å—Ç–æ 2</button>
                        <button class="room-btn" onclick="selectRoom('workspace-3')">–ú–µ—Å—Ç–æ 3</button>
                        <button class="room-btn" onclick="selectRoom('workspace-4')">–ú–µ—Å—Ç–æ 4</button>
                        <button class="room-btn" onclick="selectRoom('workspace-5')">–ú–µ—Å—Ç–æ 5</button>
                    </div>
                
                    <div class="timetable-container">
                        <h3 style="text-align: center; margin-bottom: 1rem;">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</h3>
                        <div class="timetable">
                            <div class="timetable-grid" id="timetableGrid">
                                <!-- JS will populate this -->
                            </div>
                        </div>
                    </div>
                
                    <form id="adminBookingForm" style="margin-top: 2rem;">
                        <input type="hidden" id="editingBookingId">
                        <div class="form-group">
                            <label>–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞</label>
                            <input type="text" id="clientName" required>
                        </div>
                        <div class="form-group">
                            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="clientPhone" required placeholder="+7 (___) ___-__-__">
                        </div>
                        <div class="form-group">
                            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π</label>
                            <input type="number" id="guestCount" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                            <textarea id="additionalNotes" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label>–í—ã–±—Ä–∞–Ω–æ:</label>
                            <input type="text" id="selectedTime" readonly>
                        </div>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2.39.0/dist/umd/supabase.js"></script>
    <script src="admin_script.js"></script>
</body>
</html>